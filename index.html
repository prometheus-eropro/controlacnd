<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>ControlaCND — PROMETHEUS EROPRO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="favicon.ico">

  <style>
    body{
      margin:0;
      font-family:Segoe UI, Arial, sans-serif;
      background:#f2f6fb;
      color:#0d1b2a;
    }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .card{
      width:420px;
      background:#fff;
      border-radius:16px;
      box-shadow:0 8px 30px rgba(0,0,0,0.12);
      padding:34px;
      text-align:center;
    }

    .logo img{
      width:92px;
      height:auto;
      margin-bottom:14px;
    }

    .brand{
      font-weight:800;
      font-size:14px;
      letter-spacing:1.2px;
      color:#1b263b;
      margin-bottom:8px;
      text-transform:uppercase;
    }

    h1{
      margin:6px 0 6px;
      font-size:30px;
      color:#0d1b2a;
    }

    .subtitle{
      margin:0 0 18px;
      font-size:14px;
      color:#475569;
      line-height:1.35;
    }

    .tagline{
      margin:0 0 18px;
      font-size:13px;
      color:#1b263b;
      font-style:italic;
      background:#eef3fb;
      padding:10px 12px;
      border-radius:10px;
    }

    .row{
      text-align:left;
      margin-top:10px;
    }

    label{
      display:block;
      font-size:12px;
      color:#475569;
      margin:12px 0 6px;
    }

    input{
      width:100%;
      padding:12px 12px;
      border-radius:10px;
      border:1px solid #cbd5e1;
      font-size:14px;
      outline:none;
    }

    input:focus{
      border-color:#0d1b2a;
      box-shadow:0 0 0 3px rgba(13,27,42,0.10);
    }

    button{
      width:100%;
      padding:12px 14px;
      margin-top:16px;
      background:#0d1b2a;
      color:#fff;
      border:none;
      border-radius:10px;
      font-size:15px;
      cursor:pointer;
    }

    button:hover{ background:#1b263b; }

    .footer{
      margin-top:16px;
      font-size:13px;
      color:#64748b;
      line-height:1.4;
    }

    .support{
      margin-top:10px;
      font-size:13px;
      color:#334155;
      background:#f8fafc;
      border:1px solid #e2e8f0;
      padding:10px 12px;
      border-radius:10px;
    }

    .support strong{ color:#0d1b2a; }

    .mini{
      margin-top:10px;
      font-size:12px;
      color:#94a3b8;
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <div class="logo">
      <img src="logo.png" alt="ControlaCND">
    </div>

    <div class="brand">PROMETHEUS EROPRO</div>

    <h1>ControlaCND</h1>

    <p class="subtitle">
      Painel de acompanhamento e alerta automático de certidões<br>
      (10 dias, 5 dias e vencidas)
    </p>

    <p class="tagline">“Tecnologia com ConsciêncIA gera resultado.”</p>

    <div class="row">
      <label>Cliente ID</label>
      <input type="text" id="cliente" placeholder="Ex: CND-001">

      <label>Senha</label>
      <input type="password" id="senha" placeholder="Digite sua senha">
    </div>

    <button onclick="login()">Entrar</button>

    <div class="support">
      <strong>Suporte:</strong> (28) 99969-2303
    </div>

    <div class="footer">
      Ao entrar, você verá automaticamente os alertas de 10 dias, 5 dias e vencidas.
    </div>

    <div class="mini">© PROMETHEUS EROPRO — ControlaCND</div>

  </div>
</div>

<script>
  // Cole aqui a URL do seu Web App do GAS (deploy como Web App)
const WEBAPP = "https://script.google.com/macros/s/AKfycbyucyxvz8RrImT2QZqCxW18wWmD-BZxdEuDBCvSWIK93t9M4GUn-uWWhN6YDu3iZSO6Eg/exec";


  async function login(){

  const cliente = document.getElementById("cliente").value.trim();
  const senha = document.getElementById("senha").value.trim();

  if(!cliente || !senha){
    alert("Preencha Cliente ID e Senha.");
    return;
  }

  const formData = new URLSearchParams();
  formData.append("action", "loginCND");
  formData.append("usuario", cliente);
  formData.append("senha", senha);

  try{

    const response = await fetch(WEBAPP, {
      method: "POST",
      body: formData
    });

    const d = await response.json();

    if(d.ok){
      localStorage.setItem("cliente_id", d.cliente_id);
      localStorage.setItem("usuario_nome", d.nome);
      window.location = "painel_cliente.html";
    } else {
      alert(d.msg || "Falha no login.");
    }

  }catch(err){
    alert("Erro ao conectar no servidor.");
  }
}
</script>
</body>
</html>
